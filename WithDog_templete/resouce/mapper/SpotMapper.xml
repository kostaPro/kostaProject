<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="store.mapper.SpotMapper">

	<sql id="selectSpot">
		SELECT spotId, spotName, spotLocation, spotInfo, spotType,
		thumNail,registerId
		FROM spot_TB
	</sql>

	<insert id="createSpot" parameterType="Spot">
		INSERT INTO
		spot_TB(spotId, spotName, spotLocation, spotInfo, spotType,
		thumNail,registerId)
		VALUES (#{spotId}, #{spotName}, #{spotLocation},
		#{spotInfo}, #{spotType},
		#{thumNail},#{registerId})
	</insert>

	<select id="retrieveAllSpots" resultMap="Spot">
		<include refid="selectSpot"></include>
	</select>

	<select id="retrieveSpotsByLocation" parameterType="String"
		resultMap="Spot">
		<include refid="selectSpot"></include>
		where spotLocation LIKE #{location}
	</select>


	<select id="retrieveSpotsBySpotType" parameterType="String"
		resultMap="Spot">
		<include refid="selectSpot"></include>
		where spotType = #{spotType}
	</select>


	<select id="retrieveSpotsByLocationSpotType" parameterType="Map"
		resultMap="Spot">
		<include refid="selectSpot"></include>
		where spotType = #{spotType}
		and spotLocation LIKE #{location}
	</select>


	<select id="retrieveSpotBySpotId" parameterType="Integer"
		resultMap="Spot">
		<include refid="selectSpot"></include>
		where spotId = #{spotId}
	</select>


	<select id="retrieveSpotsBySpotName" parameterType="String"
		resultMap="Spot">
		<include refid="selectSpot"></include>
		where spotName LIKE #{spotName}
	</select>


	<select id="retrieveImageListBySpotId" parameterType="Integer"
		resultMap="String">
		select imageUrl
		from spotImage_tb
		where spotId = #{spotId}
	</select>


	<select id="retrieveSpotsByRegisterId" parameterType="String"
		resultMap="Spot">
		<include refid="selectSpot"></include>
		where registerId = #{regiserId}
	</select>

	<update id="updateSpot" parameterType="Spot">
		update spot_tb set spotInfo = #{spotInfo} and spotType = #{spotType}
		where spotId = #{spotId}
	</update>

	<delete id="deleteSpot" parameterType="Integer">
		DELETE FROM spot_TB
		where spotId = #{spotId}
	</delete>

</mapper>